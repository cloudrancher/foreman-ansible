---
foreman_db_username: foreman
foreman_db_password: supersecret$42

foreman_proxy_dns: true
bind_zone_master_server_ip: 172.16.2.1
foreman_proxy_bind_host: 127.0.0.1
foreman_proxy_tftp_host: 172.16.2.1

fqdn: pxe.foreman-net.local
fqdn_short: "{{ fqdn.split('.') | first }}"
hostname_fqdn: "{{ fqdn }}"
hosts_extra_localhosts:
  - "{{ fqdn }}"
  - "{{ fqdn_short }}"

mysql_databases:
  - name: foreman
    collation: utf8_unicode_ci
    encoding: utf8

mysql_users: 
  - name: "{{ foreman_db_username }}"
    host: localhost
    password: "{{ foreman_db_password }}"
    priv: "{{ foreman_db_username }}.*:ALL"

isc_dhcp_server_subnet:
  - netaddress: 172.16.2.0
    netmask: 255.255.255.0
    gateway: 172.16.2.1
    domain: foreman-net.local
    domain_search: foreman-net.local
    dns: "{{ bind_zone_master_server_ip }}"
    range: 172.16.2.101 172.16.2.200

network_connections:
  - name: "internal"
    type: "ethernet"
    interface_name: "enp0s8"
    zone: "internal"
    autoconnect: yes
    ip:
      dhcp4: no
      dns:
        - 172.16.2.1
      dns_search:
        - foreman-net.local
      auto6: no
      address:
        - 172.16.2.1/24
  - name: "external"
    type: "ethernet"
    interface_name: "enp0s3"
    zone: "external"
    autoconnect: yes
    ip:
      dhcp4: yes
      auto6: no
  # - name: "trusted"
  #   type: "ethernet"
  #   interface_name: "enp0s9"
  #   zone: "trusted"
  #   autoconnect: yes
  #   ip:
  #     dhcp4: yes
  #     auto6: no

default_zone: internal
firewalld_service_rules:
  dhcp:
    state: enabled
    zone: internal
  dns:
    state: enabled
    zone: internal
  http:
    state: enabled
    zone: internal
  https:
    state: enabled
    zone: internal
  puppetmaster:
    state: enabled
    zone: internal
  tftp:
    state: enabled
    zone: internal

bind_allow_query: ['localhost', '172.16.2.0/24']
bind_listen_ipv4: ['any']
bind_recursion: true
bind_allow_recursion: ['localhost', '172.16.2.0/24']
bind_dnssec_validation: false
bind_extra_include_files:
  - /etc/named.rndc-foreman.key
bind_zone_dir: "/var/named/dynamic/"
bind_zone_file_mode: "0660"
bind_zone_domains:
  - name: foreman-net.local
    networks: ['172.16.2']
    name_servers: ['pxe']
    allow_update: ['key "foreman"']
    hosts:
    - name: pxe
      ip: 172.16.2.1
      aliases:
        - foreman
